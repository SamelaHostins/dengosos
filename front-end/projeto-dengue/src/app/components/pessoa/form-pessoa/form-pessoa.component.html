<div class="container mb-3 mt-3">
  <div *ngIf="msgRetorno | async" class="row ">
    <div class="col">
      <div class="alert alert-success mt-5 mb-5" role="alert">
        Formulário enviado com sucesso!
      </div>
    </div>
  </div>

<div class="container mt-5 mb-5 custom-height">

  <h1>Sobre Você</h1>

  <p class="mb-5">Nos ajude no combate contando um pouco sobre você!</p>

  <form id="formCadastro" class="needs-validation">

    <div class="form-row mb-3">
      <div class="col">
        <label for="nome">Nome:</label>
        <input
          name="nome"
          class="form-control col-md-8"
          type="text"
          [(ngModel)]="formContato.nome"
          placeholder="Insira seu nome" required
        />
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>

      <div class="col">
        <label for="cpf">CPF:</label>
        <input
          onkeypress="$(this).mask('000.000.000-00');"
          name="cpf"
          class="form-control col-md-8"
          type="text"
          [(ngModel)]="formContato.cpf"
          placeholder="Insira seu CPF" required
        />
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>
    </div>


    <div class="form-group">
      <label for="data-nascimento">Data de Nascimento:</label>
      <input
        id="dataNasc"
        name="dataNasc"
        type="date"
        [(ngModel)]="formContato.dataNasc"
        class="form-control col-md-4" required
      />
      <div class="valid-feedback">Valid.</div>
      <div class="invalid-feedback">Please fill out this field.</div>
    </div>


    <div class="form-group">
      <label for="genero">Gênero:</label>
      <select
        name="genero"
        id="genero"
        class="form-control col-md-4"
        [(ngModel)]="formContato.sexo"
        required
      >
      <option selected disabled>Escolha...</option>
        <option value="M">Masculino</option>
        <option value="F">Feminino</option>
        <option value="O">Outro</option>
      </select>
      <div class="valid-feedback">Valid.</div>
      <div class="invalid-feedback">Please fill out this field.</div>
    </div>


    <div class="form-group">
      <label for="situacao">Situação:</label>
      <select
        name="situacao"
        id="situacao"
        class="form-control col-md-4"
        [(ngModel)]="formContato.situacao" required
      >
        <option selected disabled>Escolha...</option>
        <option value="S">Suspeito</option>
        <option value="C">Confirmado</option>
      </select>
      <div class="valid-feedback">Valid.</div>
      <div class="invalid-feedback">Please fill out this field.</div>
    </div>


    <!-- VIA CEP API -->
    <div class="form-group">
      <label for="endereço">CEP:</label>
      <input
        onkeypress="$(this).mask('00000-000')"
        type="text"
        (blur)="getViaCEP($event)"
        class="form-control col-md-4"
        name="cep"
        placeholder="Insira o CEP" required
      />
      <div class="valid-feedback">Valid.</div>
      <div class="invalid-feedback">Please fill out this field.</div>
    </div>

    <!-- ENDEREÇO - API -->
    <!-- quando o showform for true ele vai exibir -->
    <div  name="retorno-cep">
      <div class="form-row mb-3">
        <div class="col">
          <label for="rua">Rua:</label>
          <input
            type="text"
            [(ngModel)]="formContato.endereco.logradouro"
            class="form-control col-md-8"
            name="rua"
            placeholder="Rua" required
          />
          <div class="valid-feedback">Valid.</div>
          <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="col">
          <label for="numero">Número:</label>
          <input
            type="text"
            [(ngModel)]="formContato.endereco.numero"
            class="form-control col-md-4"
            name="numero"
            placeholder="Número" required
          />
          <div class="valid-feedback">Valid.</div>
          <div class="invalid-feedback">Please fill out this field.</div>
        </div>
      </div>

      <div class="form-group">
        <label for="bairro">Bairro:</label>
        <input
          type="text"
          [(ngModel)]="formContato.endereco.bairro"
          class="form-control col-md-4"
          name="bairro"
          placeholder="Bairro" required
        />
        <div class="valid-feedback">Valid.</div>
        <div class="invalid-feedback">Please fill out this field.</div>
      </div>

      <div class="form-row">
        <div class="col">
          <label for="cidade">Cidade:</label>
          <input
            type="text"
            [(ngModel)]="formContato.endereco.localidade"
            class="form-control col-md-8"
            name="cidade"
            placeholder="Cidade"
            required
          />
          <div class="valid-feedback">Valid.</div>
          <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="col">
          <label for="cidade">UF:</label>
          <input
            type="text"
            [(ngModel)]="formContato.endereco.uf"
            class="form-control col-md-4"
            name="uf"
            placeholder="UF" required
          />
          <div class="valid-feedback">Valid.</div>
          <div class="invalid-feedback">Please fill out this field.</div>
        </div>
      </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-10 mt-4">
        <button (click)="resetForm()" type="reset" class="btn btn-primary custom-bg mr-3">
          Limpar
        </button>
        <button
          (click)="enviarFormPessoa()"
          type="submit"
          class="btn btn-primary">
          Enviar
        </button>
      </div>
    </div>

  </form>

</div>
